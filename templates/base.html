<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
  <title>Darkmatter | {{ path }}</title>
	<script>
    const ROOT_DIR = "{{ root }}";
    const SERVER_HOST = "{{ host }}";
    const SERVER_PORT = "{{ port }}";
		const LS_URI = `ws://${SERVER_HOST}:${SERVER_PORT}`;
    const HTTP_URI = `http://${SERVER_HOST}:${SERVER_PORT}`;
    const CD_URI = `${HTTP_URI}/${ROOT_DIR}`;
    const FILE_PATH = "{{ path }}";
	</script>
	<script src="/static/components/d3/d3.min.js"></script>
  <script src="/static/components/ace/ace.js"></script>
  <script src="/static/components/katex/katex.min.js"></script>
  <script src="/static/components/marked/marked.min.js"></script>
	<script src="/static/parse.js"></script>
  <script src="/static/socket.js"></script>
  <script src="/static/generateCell.js"></script>
  <script src="/static/slide.js"></script>
  <script src="/static/startup.js"></script>
  <link rel="stylesheet" href="/static/components/katex/katex.min.css">
  <link rel="stylesheet" href="/static/editcell.css">
  <link rel="stylesheet" href="/static/ui.css">
 </head>
 <body unresolved>

  <header>
    <h1>Darkmatter Notebook</h1>
    <p id="alert" class="right"></p>
  </header>

  <nav>
    <ul id="menubar">
      <li><input class="hidden" type="checkbox" name="menuitem" id="menu-file">
        <label for="menu-file">File</label>
        <ul class="submenu">
          <li onclick="window.ls.save(document.getElementsByClassName('editcell'));">Save (Ctrl-s)</li>
          <li onclick="window.ls.recall();">Recall package (Ctrl-r)</li>
        </ul>
      </li>

      <li><input class="hidden" type="checkbox" name="menuitem" id="menu-edit">
        <label for="menu-edit">Edit</label>
        <ul class="submenu">
          <li onclick="alert('Use keyborad shortcut Ctrl-i');">Change cell language (Ctrl-i)</li>
          <li onclick="focusPrevCell();">Select previous cell (Ctrl-↑)</li>
          <li onclick="focusNextCell();">Select next cell (Ctrl-↓)</li>
          <li onclick="swapPrevCell();">Swap to previous cell (Shift-Ctrl-↑)</li>
          <li onclick="swapNextCell();">Swap to next cell (Shift-Ctrl-↓)</li>
          <li onclick="addCellToCurrentAbove();">Add cell above (Ctrl-p)</li>
          <li onclick="addCellToCurrentBelow();">Add cell below (Ctrl-b)</li>
          <li onclick="removeCurrentCell();">Remove cell (Ctrl-Del)</li>
        </ul>
      </li>

      <li><input class="hidden" type="checkbox" name="menuitem" id="menu-view">
        <label for="menu-view">View</label>
        <ul class="submenu">
          <li onclick="startSlideMode()">Start slide mode (Ctrl-F5)</li>
        </ul>
      </li>

      <li><input class="hidden" type="checkbox" name="menuitem" id="menu-tools">
        <label for="menu-tools">Tools</label>
        <ul class="submenu">
          <li onclick="evalAllCells();">Eval all cells (Ctrl-F9)</li>
        </ul>
      </li>

    </ul>

    <p id="indicator" class="notconnected"></p>

  </nav>

  <div id="drawer"></div>

  <div class="slide-controller" id="left" onclick="prevSlide();"> Back </div>
  <div class="slide-controller" id="right" onclick="nextSlide();"> Next </div>

  <div id="dm-container">
    {% for data in editcells %}
    <div class="editcell" id="{{ data.id }}" data-count="{{ data.count }}" data-next="{{ data.next }}" data-before="{{ data.before }}" data-lang="{{ data.lang }}">
      <div id="lisp" class="cache" data-content="{{ data.lisp }}"></div>
      <div id="md" class="cache" data-content="{{ data.md }}"></div>
      <div id="editor"></div>
      <div id="output" {% ifnotequal data.output "" %}class="show"{% endifnotequal %}>{{ data.output | safe }}</div>
    </div>
    {% endfor %}
	</div>
</body>
</html>
